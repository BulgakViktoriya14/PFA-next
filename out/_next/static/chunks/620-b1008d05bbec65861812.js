(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[620],{1887:function(e,t,r){"use strict";function n(e){return{type:"SET_USER_SUM",payload:e}}r.d(t,{A:function(){return n}})},7483:function(e,t,r){"use strict";var n=r(5893),a=r(6610),s=r(5991),c=r(5255),o=r(6089),u=r(7608);function i(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,u.Z)(e);if(t){var a=(0,u.Z)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,o.Z)(this,r)}}var d=function(e){(0,c.Z)(r,e);var t=i(r);function r(){return(0,a.Z)(this,r),t.apply(this,arguments)}return(0,s.Z)(r,[{key:"render",value:function(){return(0,n.jsx)("button",{className:"button-delete-card",onClick:this.props.changeFlagDeleteCard})}}]),r}(r(7294).Component);t.Z=d},3923:function(e,t,r){"use strict";var n=r(5893),a=r(6610),s=r(5991),c=r(3349),o=r(5255),u=r(6089),i=r(7608),d=r(6156);function l(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,i.Z)(e);if(t){var a=(0,i.Z)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,u.Z)(this,r)}}var f=function(e){(0,o.Z)(r,e);var t=l(r);function r(){var e;(0,a.Z)(this,r);for(var n=arguments.length,s=new Array(n),o=0;o<n;o++)s[o]=arguments[o];return e=t.call.apply(t,[this].concat(s)),(0,d.Z)((0,c.Z)(e),"openPopupAddCard",(function(){document.querySelector(".creation-card").classList.add("creation-card_open")})),e}return(0,s.Z)(r,[{key:"render",value:function(){return(0,n.jsx)("button",{className:"button-open-popup-add-card",onClick:this.openPopupAddCard})}}]),r}(r(7294).Component);t.Z=f},4800:function(e,t,r){"use strict";var n=r(5893),a=r(6610),s=r(5991),c=r(3349),o=r(5255),u=r(6089),i=r(7608),d=r(6156),l=r(7294),f=r(8278),p=r(6940),m=r(1887);function h(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,i.Z)(e);if(t){var a=(0,i.Z)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,u.Z)(this,r)}}var y=function(e){(0,o.Z)(r,e);var t=h(r);function r(e){var n;return(0,a.Z)(this,r),n=t.call(this,e),(0,d.Z)((0,c.Z)(n),"createList",(function(){var e=[];for(var t in n.props.cards)e.push(n.props.cards[t]),n.sortCard(e);e.reverse(),n.setState({arrayCards:e})})),(0,d.Z)((0,c.Z)(n),"openMoreDetails",(function(e){e.target.parentElement.classList.add("open")})),(0,d.Z)((0,c.Z)(n),"closeMoreDetails",(function(e){e.target.parentElement.parentElement.classList.remove("open")})),(0,d.Z)((0,c.Z)(n),"deleteCard",(function(e){var t=(0,c.Z)(n),r=e.target.parentElement.getAttribute("id"),a=e.target.parentElement.querySelector(".card__sum").textContent,s=Number(n.props.userSum);f.Z.database().ref("users/user"+t.props.userId+"/"+t.props.type+"/card"+r).remove().then((function(){"cardsIncome"===t.props.type&&(s-=Number(a)),"cardsExpenses"===t.props.type&&(s+=Number(a)),t.props.setUserSumFunction(s)})).then((function(){f.Z.database().ref("users/user"+t.props.userId).update({money:s})})).catch((function(e){return console.log(e.message)}))})),n.state={arrayCards:[]},n}return(0,s.Z)(r,[{key:"componentDidUpdate",value:function(e){this.props.cards!==e.cards&&this.createList()}},{key:"componentDidMount",value:function(){this.createList()}},{key:"sortCard",value:function(e){e.sort((function(e,t){return e.startedAt>t.startedAt?1:-1}))}},{key:"render",value:function(){var e=this;return(0,n.jsxs)("div",{className:"container cards",children:[!this.state.arrayCards.length&&(0,n.jsx)("p",{className:"cards-container-empty",children:"You haven't created any cards yet."}),this.state.arrayCards.map((function(t){return(0,n.jsxs)("article",{className:"card",id:t.id,children:[(0,n.jsx)("button",{className:"card__button-delete".concat(e.props.flagDeleteCard?" visible":""),onClick:e.deleteCard}),(0,n.jsx)("h3",{className:"card__title",children:t.title}),(0,n.jsx)("h4",{className:"card__category",children:t.category}),t.description&&(0,n.jsx)("button",{className:"card__more-details",onClick:e.openMoreDetails,children:"More details"}),(0,n.jsxs)("p",{className:"card__bottom",children:[(0,n.jsx)("span",{className:"card__sum",children:t.money}),(0,n.jsx)("span",{className:"card__date",children:t.date})]}),t.description&&(0,n.jsxs)("div",{className:"card__description",children:[(0,n.jsx)("p",{children:t.description}),(0,n.jsx)("button",{className:"card__more-details",onClick:e.closeMoreDetails,children:"Hide"})]})]},t.id)}))]})}}]),r}(l.Component);t.Z=(0,p.$j)((function(e){return{userId:e.userInfo.idUser,cardsIncome:e.userInfo.cardsIncome,cardsExpenses:e.userInfo.cardsExpenses,userSum:e.userInfo.userSum}}),(function(e){return{setUserSumFunction:function(t){e((0,m.A)(t))}}}))(y)},5011:function(e,t,r){"use strict";r.d(t,{Z:function(){return S}});var n=r(5893),a=r(6610),s=r(5991),c=r(3349),o=r(5255),u=r(6089),i=r(7608),d=r(6156),l=r(7294),f=r(518),p=r(1704),m=r(4586),h=r(8278),y=r(1887),v=r(6940),Z=r(7449);function C(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,i.Z)(e);if(t){var a=(0,i.Z)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,u.Z)(this,r)}}var g=function(e){(0,o.Z)(r,e);var t=C(r);function r(e){var n;return(0,a.Z)(this,r),n=t.call(this,e),(0,d.Z)((0,c.Z)(n),"getDate",(function(){var e=new Date,t=e.getDate(),r=e.getMonth()+1,n=e.getFullYear();return t<10&&(t="0"+t),r<10&&(r="0"+r),n<10&&(n="0"+n),t+"."+r+"."+n})),(0,d.Z)((0,c.Z)(n),"createCard",(function(){var e=n.sum.current.value,t=n.category.current.value,r=n.name.current.value,a=n.description.current.value;return{title:r,money:e,category:t,date:n.getDate(),description:a}})),(0,d.Z)((0,c.Z)(n),"checkResultAccount",(function(e){return!("expenses"===n.props.type&&Number(e)>Number(n.props.userSum))||(n.setState({errorText:"Your balance does not allow the operation"}),!1)})),(0,d.Z)((0,c.Z)(n),"crateOneCard",(function(e,t,r,n){var a=(0,m.Z)(),s="/users/user"+n.props.userId+"/"+e+"/card"+a;h.Z.database().ref(s).set({startedAt:h.Z.database.ServerValue.TIMESTAMP,id:a,category:r.category,date:r.date,money:r.money,title:r.title,description:r.description}).then((function(){n.form.current.reset()})).then((function(){n.props.setUserSumFunction(t)})).then((function(){h.Z.database().ref("/users/user"+n.props.userId).update({money:t})}))})),(0,d.Z)((0,c.Z)(n),"addCart",(function(){var e=document.querySelectorAll("input[required]"),t=[];if(e.forEach((function(e){t.push(e.value)})),(0,p.m)(t)){if(n.setState({errorText:""}),n.checkResultAccount(document.querySelector("#sum").value)){var r=(0,c.Z)(n),a=n.createCard();if("income"===n.props.type){var s=Number(n.props.userSum)+Number(a.money);n.crateOneCard("cardsIncome",s,a,r)}else{var o=Number(n.props.userSum)-Number(a.money);n.crateOneCard("cardsExpenses",o,a,r)}}}else n.setState({errorText:"You did not fill in the required fields"})})),n.state={errorText:""},n.name=l.createRef(),n.sum=l.createRef(),n.category=l.createRef(),n.description=l.createRef(),n.form=l.createRef(),n}return(0,s.Z)(r,[{key:"render",value:function(){return(0,n.jsxs)("form",{className:"form form-add-card",ref:this.form,children:[(0,n.jsx)(Z.Z,{ref:this.name,required:!0,label:"Title",type:"text",id:"name",flagPasswordField:!1}),(0,n.jsx)(Z.Z,{ref:this.category,label:"Category",type:"text",id:"category",flagPasswordField:!1}),(0,n.jsx)(Z.Z,{ref:this.sum,required:!0,label:"Amount",type:"number",id:"sum",flagPasswordField:!1}),(0,n.jsx)(Z.Z,{ref:this.description,label:"Description",type:"text",id:"description",flagPasswordField:!1}),(0,n.jsx)("input",{type:"button",className:"button-add-card",value:"Add card",onClick:this.addCart}),this.state.errorText&&(0,n.jsx)("p",{className:"massage-error",children:this.state.errorText})]})}}]),r}(l.Component);var x=(0,v.$j)((function(e){return{cardsIncome:e.userInfo.cardsIncome,cardsExpenses:e.userInfo.cardsExpenses,userId:e.userInfo.idUser,userSum:e.userInfo.userSum}}),(function(e){return{setUserSumFunction:function(t){e((0,y.A)(t))}}}))(g),b=r(5675);function R(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,i.Z)(e);if(t){var a=(0,i.Z)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,u.Z)(this,r)}}var S=function(e){(0,o.Z)(r,e);var t=R(r);function r(e){var n;return(0,a.Z)(this,r),n=t.call(this,e),(0,d.Z)((0,c.Z)(n),"closePopupCreationCard",(function(){n.blockCreateCard.current.classList.remove("creation-card_open")})),n.state={errorText:""},n.blockCreateCard=l.createRef(),n}return(0,s.Z)(r,[{key:"render",value:function(){return(0,n.jsxs)("div",{className:"creation-card",ref:this.blockCreateCard,children:[(0,n.jsx)("button",{className:"close",onClick:this.closePopupCreationCard,children:(0,n.jsx)(b.default,{src:f.Z,alt:"close",width:"30",height:"30"})}),(0,n.jsx)("h2",{className:"subtitle",children:"Create card"}),(0,n.jsx)(x,{type:this.props.type})]})}}]),r}(l.Component)},4586:function(e,t,r){"use strict";var n;r.d(t,{Z:function(){return l}});var a=new Uint8Array(16);function s(){if(!n&&!(n="undefined"!==typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!==typeof msCrypto&&"function"===typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return n(a)}var c=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;for(var o=function(e){return"string"===typeof e&&c.test(e)},u=[],i=0;i<256;++i)u.push((i+256).toString(16).substr(1));var d=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=(u[e[t+0]]+u[e[t+1]]+u[e[t+2]]+u[e[t+3]]+"-"+u[e[t+4]]+u[e[t+5]]+"-"+u[e[t+6]]+u[e[t+7]]+"-"+u[e[t+8]]+u[e[t+9]]+"-"+u[e[t+10]]+u[e[t+11]]+u[e[t+12]]+u[e[t+13]]+u[e[t+14]]+u[e[t+15]]).toLowerCase();if(!o(r))throw TypeError("Stringified UUID is invalid");return r};var l=function(e,t,r){var n=(e=e||{}).random||(e.rng||s)();if(n[6]=15&n[6]|64,n[8]=63&n[8]|128,t){r=r||0;for(var a=0;a<16;++a)t[r+a]=n[a];return t}return d(n)}}}]);