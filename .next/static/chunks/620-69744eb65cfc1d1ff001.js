"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[620],{1887:function(e,t,r){function n(e){return{type:"SET_USER_SUM",payload:e}}r.d(t,{A:function(){return n}})},7483:function(e,t,r){var n=r(5671),o=r(3144),a=r(9340),c=r(2963),s=r(1120),u=r(7294),i=r(5893);function d(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,s.Z)(e);if(t){var o=(0,s.Z)(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return(0,c.Z)(this,r)}}var l=function(e){(0,a.Z)(r,e);var t=d(r);function r(){return(0,n.Z)(this,r),t.apply(this,arguments)}return(0,o.Z)(r,[{key:"render",value:function(){return(0,i.jsx)("button",{className:"button-delete-card",onClick:this.props.changeFlagDeleteCard})}}]),r}(u.Component);t.Z=l},3923:function(e,t,r){var n=r(5671),o=r(3144),a=r(7326),c=r(9340),s=r(2963),u=r(1120),i=r(4942),d=r(7294),l=r(5893);function f(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,u.Z)(e);if(t){var o=(0,u.Z)(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return(0,s.Z)(this,r)}}var p=function(e){(0,c.Z)(r,e);var t=f(r);function r(){var e;(0,n.Z)(this,r);for(var o=arguments.length,c=new Array(o),s=0;s<o;s++)c[s]=arguments[s];return e=t.call.apply(t,[this].concat(c)),(0,i.Z)((0,a.Z)(e),"openPopupAddCard",(function(){document.querySelector(".creation-card").classList.add("creation-card_open"),document.querySelector(".button-open-sidebar").classList.add("hidden")})),e}return(0,o.Z)(r,[{key:"render",value:function(){return(0,l.jsx)("button",{className:"button-open-popup-add-card",onClick:this.openPopupAddCard})}}]),r}(d.Component);t.Z=p},4800:function(e,t,r){var n=r(5671),o=r(3144),a=r(7326),c=r(9340),s=r(2963),u=r(1120),i=r(4942),d=r(7294),l=r(2567),f=r(8216),p=r(1887),m=r(5893);function h(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,u.Z)(e);if(t){var o=(0,u.Z)(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return(0,s.Z)(this,r)}}var y=function(e){(0,c.Z)(r,e);var t=h(r);function r(e){var o;return(0,n.Z)(this,r),o=t.call(this,e),(0,i.Z)((0,a.Z)(o),"createList",(function(){var e=[];for(var t in o.props.cards)e.push(o.props.cards[t]),o.sortCard(e);e.reverse(),o.setState({arrayCards:e})})),(0,i.Z)((0,a.Z)(o),"openMoreDetails",(function(e){e.target.parentElement.classList.add("open")})),(0,i.Z)((0,a.Z)(o),"closeMoreDetails",(function(e){e.target.parentElement.parentElement.classList.remove("open")})),(0,i.Z)((0,a.Z)(o),"deleteCard",(function(e){var t=(0,a.Z)(o),r=e.target.parentElement.getAttribute("id"),n=e.target.parentElement.querySelector(".card__sum").textContent,c=Number(o.props.userSum);l.Z.database().ref("users/user"+t.props.userId+"/"+t.props.type+"/card"+r).remove().then((function(){"cardsIncome"===t.props.type&&(c-=Number(n)),"cardsExpenses"===t.props.type&&(c+=Number(n)),t.props.setUserSumFunction(+c.toFixed(2))})).then((function(){l.Z.database().ref("users/user"+t.props.userId).update({money:+c.toFixed(2)})})).catch((function(e){return console.log(e.message)}))})),o.state={arrayCards:[]},o}return(0,o.Z)(r,[{key:"componentDidUpdate",value:function(e){this.props.cards!==e.cards&&this.createList()}},{key:"componentDidMount",value:function(){this.createList()}},{key:"sortCard",value:function(e){e.sort((function(e,t){return e.startedAt>t.startedAt?1:-1}))}},{key:"render",value:function(){var e=this;return(0,m.jsxs)("div",{className:"container cards",children:[!this.state.arrayCards.length&&(0,m.jsx)("p",{className:"cards-container-empty",children:"You haven't created any cards yet."}),this.state.arrayCards.map((function(t){return(0,m.jsxs)("article",{className:"card",id:t.id,children:[(0,m.jsx)("button",{className:"card__button-delete".concat(e.props.flagDeleteCard?" visible":""),onClick:e.deleteCard}),(0,m.jsx)("h3",{className:"card__title",children:t.title}),(0,m.jsx)("h4",{className:"card__category",children:t.category}),t.description&&(0,m.jsx)("button",{className:"card__more-details",onClick:e.openMoreDetails,children:"More details"}),(0,m.jsxs)("p",{className:"card__bottom",children:[(0,m.jsx)("span",{className:"card__sum",children:t.money}),(0,m.jsx)("span",{className:"card__date",children:t.date})]}),t.description&&(0,m.jsxs)("div",{className:"card__description",children:[(0,m.jsx)("p",{children:t.description}),(0,m.jsx)("button",{className:"card__more-details",onClick:e.closeMoreDetails,children:"Hide"})]})]},t.id)}))]})}}]),r}(d.Component);t.Z=(0,f.$j)((function(e){return{userId:e.userInfo.idUser,cardsIncome:e.userInfo.cardsIncome,cardsExpenses:e.userInfo.cardsExpenses,userSum:e.userInfo.userSum}}),(function(e){return{setUserSumFunction:function(t){e((0,p.A)(t))}}}))(y)},5011:function(e,t,r){r.d(t,{Z:function(){return S}});var n=r(5671),o=r(3144),a=r(7326),c=r(9340),s=r(2963),u=r(1120),i=r(4942),d=r(7294),l=r(3561),f=r(1704),p=r(4586),m=r(2567),h=r(1887),y=r(8216),v=r(7449),Z=r(5893);function x(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,u.Z)(e);if(t){var o=(0,u.Z)(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return(0,s.Z)(this,r)}}var b=function(e){(0,c.Z)(r,e);var t=x(r);function r(e){var o;return(0,n.Z)(this,r),o=t.call(this,e),(0,i.Z)((0,a.Z)(o),"getDate",(function(){var e=new Date,t=e.getDate(),r=e.getMonth()+1,n=e.getFullYear();return t<10&&(t="0"+t),r<10&&(r="0"+r),n<10&&(n="0"+n),t+"."+r+"."+n})),(0,i.Z)((0,a.Z)(o),"createCard",(function(){var e=o.sum.current.value,t=o.category.current.value,r=o.name.current.value,n=o.description.current.value;return{title:r,money:e,category:t,date:o.getDate(),description:n}})),(0,i.Z)((0,a.Z)(o),"checkResultAccount",(function(e){return!("expenses"===o.props.type&&Number(e)>Number(o.props.userSum))||(o.setState({errorText:"Your balance does not allow the operation"}),!1)})),(0,i.Z)((0,a.Z)(o),"crateOneCard",(function(e,t,r,n){var o=(0,p.Z)(),a="/users/user"+n.props.userId+"/"+e+"/card"+o;m.Z.database().ref(a).set({startedAt:m.Z.database.ServerValue.TIMESTAMP,id:o,category:r.category,date:r.date,money:r.money,title:r.title,description:r.description}).then((function(){n.form.current.reset()})).then((function(){n.props.setUserSumFunction(t)})).then((function(){m.Z.database().ref("/users/user"+n.props.userId).update({money:t})}))})),(0,i.Z)((0,a.Z)(o),"addCart",(function(){var e=document.querySelectorAll("input[required]"),t=[];if(e.forEach((function(e){t.push(e.value)})),(0,f.m)(t)){if(o.setState({errorText:""}),o.checkResultAccount(document.querySelector("#sum").value)){var r=(0,a.Z)(o),n=o.createCard();if("income"===o.props.type){var c=Number(o.props.userSum)+Number(n.money);o.crateOneCard("cardsIncome",+c.toFixed(2),n,r)}else{var s=Number(o.props.userSum)-Number(n.money);o.crateOneCard("cardsExpenses",+s.toFixed(2),n,r)}document.querySelector(".creation-card.creation-card_open")&&document.querySelector(".creation-card.creation-card_open").classList.remove("creation-card_open"),document.querySelector(".button-open-sidebar.hidden")&&document.querySelector(".button-open-sidebar").classList.remove("hidden")}}else o.setState({errorText:"You did not fill in the required fields"})})),o.state={errorText:""},o.name=d.createRef(),o.sum=d.createRef(),o.category=d.createRef(),o.description=d.createRef(),o.form=d.createRef(),o}return(0,o.Z)(r,[{key:"render",value:function(){return(0,Z.jsxs)("form",{className:"form form-add-card",ref:this.form,children:[(0,Z.jsx)(v.Z,{ref:this.name,required:!0,label:"Title",type:"text",id:"name",flagPasswordField:!1}),(0,Z.jsx)(v.Z,{ref:this.category,label:"Category",type:"text",id:"category",flagPasswordField:!1}),(0,Z.jsx)(v.Z,{ref:this.sum,required:!0,label:"Amount",type:"number",id:"sum",flagPasswordField:!1}),(0,Z.jsx)(v.Z,{ref:this.description,label:"Description",type:"text",id:"description",flagPasswordField:!1}),(0,Z.jsx)("input",{type:"button",className:"button-add-card",value:"Add card",onClick:this.addCart}),this.state.errorText&&(0,Z.jsx)("p",{className:"massage-error",children:this.state.errorText})]})}}]),r}(d.Component);var C=(0,y.$j)((function(e){return{cardsIncome:e.userInfo.cardsIncome,cardsExpenses:e.userInfo.cardsExpenses,userId:e.userInfo.idUser,userSum:e.userInfo.userSum}}),(function(e){return{setUserSumFunction:function(t){e((0,h.A)(t))}}}))(b),g=r(5675);function R(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,u.Z)(e);if(t){var o=(0,u.Z)(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return(0,s.Z)(this,r)}}var S=function(e){(0,c.Z)(r,e);var t=R(r);function r(e){var o;return(0,n.Z)(this,r),o=t.call(this,e),(0,i.Z)((0,a.Z)(o),"closePopupCreationCard",(function(){o.blockCreateCard.current.classList.remove("creation-card_open"),document.querySelector(".button-open-sidebar").classList.remove("hidden")})),o.state={errorText:""},o.blockCreateCard=d.createRef(),o}return(0,o.Z)(r,[{key:"render",value:function(){return(0,Z.jsxs)("div",{className:"creation-card",ref:this.blockCreateCard,children:[(0,Z.jsx)("button",{className:"close",onClick:this.closePopupCreationCard,children:(0,Z.jsx)(g.default,{src:l.Z,alt:"close",width:30,height:30,loading:"lazy"})}),(0,Z.jsx)("h2",{className:"subtitle",children:"Create card"}),(0,Z.jsx)(C,{type:this.props.type})]})}}]),r}(d.Component)},4586:function(e,t,r){var n;r.d(t,{Z:function(){return l}});var o=new Uint8Array(16);function a(){if(!n&&!(n="undefined"!==typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!==typeof msCrypto&&"function"===typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return n(o)}var c=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;for(var s=function(e){return"string"===typeof e&&c.test(e)},u=[],i=0;i<256;++i)u.push((i+256).toString(16).substr(1));var d=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=(u[e[t+0]]+u[e[t+1]]+u[e[t+2]]+u[e[t+3]]+"-"+u[e[t+4]]+u[e[t+5]]+"-"+u[e[t+6]]+u[e[t+7]]+"-"+u[e[t+8]]+u[e[t+9]]+"-"+u[e[t+10]]+u[e[t+11]]+u[e[t+12]]+u[e[t+13]]+u[e[t+14]]+u[e[t+15]]).toLowerCase();if(!s(r))throw TypeError("Stringified UUID is invalid");return r};var l=function(e,t,r){var n=(e=e||{}).random||(e.rng||a)();if(n[6]=15&n[6]|64,n[8]=63&n[8]|128,t){r=r||0;for(var o=0;o<16;++o)t[r+o]=n[o];return t}return d(n)}}}]);