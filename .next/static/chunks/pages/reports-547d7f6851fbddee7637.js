(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[53],{1743:function(t,e,r){"use strict";r.r(e),r.d(e,{default:function(){return F}});var n=r(5671),o=r(3144),a=r(7326),c=r(9340),s=r(2963),i=r(1120),u=r(4942),l=r(7294),p=r(123),f=r(8216),h=r(8617),d=r(5893);function y(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=(0,i.Z)(t);if(e){var o=(0,i.Z)(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return(0,s.Z)(this,r)}}function v(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function b(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?v(Object(r),!0).forEach((function(e){(0,u.Z)(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):v(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var m={control:function(t){return b(b({},t),{},{backgroundColor:"white"})},option:function(t,e){e.data,e.isDisabled,e.isFocused;return{backgroundColor:e.isSelected?"#ffb8b8":"#fff",padding:10,fontSize:"16px"}},menu:function(t,e){return b(b({},t),{},{padding:0,cursor:"pointer",border:"1px solid #000",borderRadius:0})}},g=function(t){(0,c.Z)(r,t);var e=y(r);function r(t){var o;return(0,n.Z)(this,r),(o=e.call(this,t)).state={options:[]},o}return(0,o.Z)(r,[{key:"componentDidMount",value:function(){var t=[];this.props.optionsArray.forEach((function(e){t.push({value:e,label:e})})),this.setState({options:t})}},{key:"render",value:function(){return(0,d.jsx)(h.ZP,{styles:m,options:this.state.options,placeholder:"",className:this.props.className,id:this.props.id,required:this.props.required})}}]),r}(l.Component);function x(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function j(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=(0,i.Z)(t);if(e){var o=(0,i.Z)(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return(0,s.Z)(this,r)}}var O=function(t){(0,c.Z)(r,t);var e=j(r);function r(t){return(0,n.Z)(this,r),e.call(this,t)}return(0,o.Z)(r,[{key:"render",value:function(){return(0,d.jsxs)("div",{className:"form__item",children:[(0,d.jsx)("label",{htmlFor:this.props.id,className:"form__label".concat(this.props.required?" required":""),children:this.props.label}),(0,d.jsx)(g,{className:"form__select",optionsArray:this.props.optionsArray,required:this.props.required?"required":"",id:this.props.id})]})}}]),r}(l.Component),R=l.forwardRef((function(t,e){return(0,d.jsx)(O,function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?x(Object(r),!0).forEach((function(e){(0,u.Z)(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):x(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({innerRef:e},t))})),Z=r(7449);function N(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=(0,i.Z)(t);if(e){var o=(0,i.Z)(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return(0,s.Z)(this,r)}}var w=function(t){(0,c.Z)(r,t);var e=N(r);function r(){return(0,n.Z)(this,r),e.apply(this,arguments)}return(0,o.Z)(r,[{key:"render",value:function(){return(0,d.jsx)("button",{id:this.props.id,onClick:this.props.functionOnClick,type:"button",className:"button-create-report",children:this.props.textButton})}}]),r}(l.Component);function S(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=(0,i.Z)(t);if(e){var o=(0,i.Z)(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return(0,s.Z)(this,r)}}var D=function(t){(0,c.Z)(r,t);var e=S(r);function r(){return(0,n.Z)(this,r),e.apply(this,arguments)}return(0,o.Z)(r,[{key:"render",value:function(){return(0,d.jsxs)("form",{className:"form form-chart",children:[(0,d.jsx)(R,{label:"Select what to build the report for",required:!0,optionsArray:["Expenses","Income"],id:"type-report"}),(0,d.jsx)(R,{label:"Select the category for the report",required:!0,id:"category-report",optionsArray:["Daily graph","Monthly graph","Yearly graph","Category graph"]}),(0,d.jsx)(Z.Z,{innerRef:this.props.startDate,required:!0,label:"Select the start date of the interval",type:"date",id:"start-date-interval",flagPasswordField:!1}),(0,d.jsx)(Z.Z,{innerRef:this.props.endDate,required:!0,label:"Select the end date of the interval",type:"date",id:"end-date-interval",flagPasswordField:!1}),(0,d.jsxs)("div",{className:"form__wrapper-buttons",children:[(0,d.jsx)(w,{functionOnClick:this.props.createReport,textButton:"Create graph",id:"graph"}),(0,d.jsx)(w,{functionOnClick:this.props.createReport,textButton:"Create table",id:"table"})]}),this.props.errorText&&(0,d.jsx)("p",{className:"massage-error",children:this.props.errorText})]})}}]),r}(l.Component),P=r(1704);function k(t){var e=t.split(/[- :]/);return t=new Date(e[0],Number(e[1])-1,e[2],e[3],e[4],e[5]).getTime()}function C(t,e){var r=document.querySelector(".report__table .tbody");r.innerHTML="",t.forEach((function(t,n){var o=document.createElement("tr"),a=document.createElement("td"),c=document.createElement("td");a.classList.add("td"),c.classList.add("td"),a.innerText="".concat(t),c.innerText="".concat(e[n]),o.append(a),o.append(c),r.append(o)}))}var _=r(4925);function E(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=(0,i.Z)(t);if(e){var o=(0,i.Z)(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return(0,s.Z)(this,r)}}var T=function(t){(0,c.Z)(r,t);var e=E(r);function r(t){return(0,n.Z)(this,r),e.call(this,t)}return(0,o.Z)(r,[{key:"render",value:function(){return(0,d.jsxs)("div",{className:"report",children:[(0,d.jsx)(_.Z,{data:this.props.data,options:this.props.options,type:this.props.typeChart,responsiveOptions:this.props.responsiveOptions,className:"".concat(this.props.flag&&"graph"===this.props.type?"":"disabled")}),(0,d.jsxs)("table",{className:"table report__table".concat(this.props.flag&&"table"===this.props.type?"":" disabled"),children:[(0,d.jsx)("thead",{className:"thead",children:(0,d.jsxs)("tr",{className:"tr",children:[(0,d.jsx)("th",{className:"th",children:"Category"}),(0,d.jsx)("th",{className:"th",children:"Amount"})]})}),(0,d.jsx)("tbody",{className:"tbody"})]})]})}}]),r}(l.Component);function B(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=(0,i.Z)(t);if(e){var o=(0,i.Z)(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return(0,s.Z)(this,r)}}var q=function(t){(0,c.Z)(r,t);var e=B(r);function r(t){var o;return(0,n.Z)(this,r),o=e.call(this,t),(0,u.Z)((0,a.Z)(o),"checkData",(function(t){0===t[0].length&&(o.setState({errorText:"You do not have data for this interval of time"}),o.setState({type:""}),o.setState({flag:!1}))})),(0,u.Z)((0,a.Z)(o),"createReport",(function(t){var e,r=document.querySelector("#type-report > div > div > div").innerText,n=document.querySelector("#category-report > div > div > div").innerText,a=o.startDate.current.value,c=o.endDate.current.value,s=(0,P.m)([a,c,r,n]),i=(e=c,k("".concat(a," 00:00:00"))<k("".concat(e," 00:00:00"))),u=function(t){return(new Date).getTime()>k("".concat(t," 00:00:00"))}(c),l=t.target.getAttribute("id");if(o.setState({type:l}),!s)return o.setState({errorText:"You have not completed the fields"}),void o.setState({flag:!1});if(!i)return o.setState({errorText:"The date interval is incorrect"}),void o.setState({flag:!1});if(!u)return o.setState({errorText:"You cannot choose a day beyond the current one"}),void o.setState({flag:!1});o.setState({errorText:""}),o.setState({flag:!0});var p="Expenses"===r?o.props.cardsExpenses:o.props.cardsIncome;switch(n){case"Daily graph":var f=function(t,e,r){var n=k("".concat(t," 00:00:00")),o=k("".concat(e," 00:00:00")),a=[],c=[],s=[],i=[];for(var u in r){var l=r[u].date.split("."),p=k("".concat(l[2],"-").concat(l[1],"-").concat(l[0]," 00:00:00"));a.push([p,r[u].money,r[u].date])}for(var f=0;f<a.length;f++)if(a[f].length<4){for(var h=f+1;h<a.length;h++)a[f][0]===a[h][0]&&a[h].length<4&&(a[f][1]=(Number(a[f][1])+Number(a[h][1])).toFixed(2),a[h].push("true"));c.push({date:a[f][0],money:a[f][1],label:a[f][2]})}return c.forEach((function(t){t.date>=n&&t.date<=o&&(s.push(t.money),i.push(t.label))})),[i,s]}(a,c,p);o.checkData(f),"graph"===l?o.setState({data:{labels:f[0],series:f[1]}}):"table"===l&&C(f[0],f[1]);break;case"Category graph":var h=function(t,e,r){var n=k("".concat(t," 00:00:00")),o=k("".concat(e," 00:00:00")),a=[],c=[],s=[],i=[];for(var u in r)if(r[u].category){var l=r[u].date.split("."),p=k("".concat(l[2],"-").concat(l[1],"-").concat(l[0]," 00:00:00"));a.push([p,r[u].money,r[u].category])}for(var f=0;f<a.length;f++)if(a[f].length<4){for(var h=f+1;h<a.length;h++)a[f][2].toLowerCase().trim()===a[h][2].toLowerCase().trim()&&a[h].length<4&&(a[f][1]=(Number(a[f][1])+Number(a[h][1])).toFixed(2),a[h].push("true"));c.push({date:a[f][0],money:a[f][1],label:a[f][2]})}return c.forEach((function(t){t.date>=n&&t.date<=o&&(s.push(t.money),i.push(t.label))})),[i,s]}(a,c,p);o.checkData(h),"graph"===l?o.setState({data:{labels:h[0],series:h[1]}}):"table"===l&&C(h[0],h[1]);break;case"Yearly graph":var d=function(t,e,r){var n=t.split("-"),o=e.split("-"),a=Number(n[0]),c=Number(o[0]),s=[],i=[],u=[],l=[];for(var p in r){var f=r[p].date.split(".")[2];s.push([f,r[p].money])}for(var h=0;h<s.length;h++)if(s[h].length<3){for(var d=h+1;d<s.length;d++)s[h][0]===s[d][0]&&s[d].length<3&&(s[h][1]=(Number(s[h][1])+Number(s[d][1])).toFixed(2),s[d].push("true"));i.push({date:s[h][0],money:s[h][1]})}return i.forEach((function(t){t.date>=a&&t.date<=c&&(u.push(t.money),l.push(t.date))})),[l,u]}(a,c,p);o.checkData(d),"graph"===l?o.setState({data:{labels:d[0],series:d[1]}}):"table"===l&&C(d[0],d[1]);break;case"Monthly graph":var y=function(t,e,r){var n=k("".concat(t," 00:00:00")),o=k("".concat(e," 00:00:00")),a=[],c=[],s=[],i=[];for(var u in r){var l=r[u].date.split("."),p=k("".concat(l[2],"-").concat(l[1],"-").concat(l[0]," 00:00:00")),f=l[2],h=l[1];a.push([f,h,r[u].money,p])}for(var d=0;d<a.length;d++)if(a[d].length<5){for(var y=d+1;y<a.length;y++)a[d][0]===a[y][0]&&a[d][1]===a[y][1]&&a[y].length<5&&(a[d][2]=(Number(a[d][2])+Number(a[y][2])).toFixed(2),a[y].push("true"));c.push({dateY:a[d][0],dateM:a[d][1],money:a[d][2],date:a[d][3]})}return c.forEach((function(t){t.date>=n&&t.date<=o&&(s.push(t.money),i.push("".concat(t.dateM,".").concat(t.dateY)))})),[i,s]}(a,c,p);o.checkData(y),"graph"===l?o.setState({data:{labels:y[0],series:y[1]}}):"table"===l&&C(y[0],y[1])}})),o.state={data:{},errorText:"",type:"",flag:!1},o.startDate=l.createRef(),o.endDate=l.createRef(),o}return(0,o.Z)(r,[{key:"render",value:function(){return(0,d.jsxs)(p.Z,{children:[(0,d.jsx)("h1",{className:"title",children:"Reports about your income and expenses"}),(0,d.jsxs)("div",{className:"report-container",children:[(0,d.jsx)(D,{startDate:this.startDate,endDate:this.endDate,createReport:this.createReport,errorText:this.state.errorText,typeReport:this.typeReport,categoryReport:this.categoryReport,buttonCreateType:this.buttonCreateType}),(0,d.jsx)(T,{data:this.state.data,flag:this.state.flag,type:this.state.type,typeChart:"Pie",responsiveOptions:[["screen and (max-width: 500px)",{height:"300px",width:"300px",labelOffset:20}]],options:{width:"400px",height:"400px",donut:!1,labelOffset:50}})]})]})}}]),r}(l.Component);var F=(0,f.$j)((function(t){return{cardsExpenses:t.userInfo.cardsExpenses,cardsIncome:t.userInfo.cardsIncome}}),null)(q)},4094:function(t,e,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/reports",function(){return r(1743)}])}},function(t){t.O(0,[947,919,17,774,888,179],(function(){return e=4094,t(t.s=e);var e}));var e=t.O();_N_E=e}]);