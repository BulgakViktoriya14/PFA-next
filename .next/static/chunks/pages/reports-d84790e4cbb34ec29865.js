(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[53],{7061:function(t,e,r){"use strict";r.d(e,{Z:function(){return x}});var n=r(4942),a=r(5671),o=r(3144),s=r(9340),c=r(2963),i=r(1120),u=r(7294),l=r(8617),p=r(5893);function d(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=(0,i.Z)(t);if(e){var a=(0,i.Z)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,c.Z)(this,r)}}function f(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function h(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?f(Object(r),!0).forEach((function(e){(0,n.Z)(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):f(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var y={control:function(t){return h(h({},t),{},{backgroundColor:"white"})},option:function(t,e){e.data,e.isDisabled,e.isFocused;return{backgroundColor:e.isSelected?"#ffb8b8":"#fff",padding:10,fontSize:"16px"}},menu:function(t,e){return h(h({},t),{},{padding:0,cursor:"pointer",border:"1px solid #000",borderRadius:0})}},v=function(t){(0,s.Z)(r,t);var e=d(r);function r(t){var n;return(0,a.Z)(this,r),(n=e.call(this,t)).state={options:[]},n}return(0,o.Z)(r,[{key:"componentDidMount",value:function(){var t=[];this.props.optionsArray.forEach((function(e){t.push({value:e,label:e})})),this.setState({options:t})}},{key:"render",value:function(){return(0,p.jsx)(l.ZP,{styles:y,options:this.state.options,placeholder:"",className:this.props.className,id:this.props.id,required:this.props.required})}}]),r}(u.Component);function m(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function b(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=(0,i.Z)(t);if(e){var a=(0,i.Z)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,c.Z)(this,r)}}var g=function(t){(0,s.Z)(r,t);var e=b(r);function r(t){return(0,a.Z)(this,r),e.call(this,t)}return(0,o.Z)(r,[{key:"render",value:function(){return(0,p.jsxs)("div",{className:"form__item",children:[this.props.label&&(0,p.jsx)("label",{htmlFor:this.props.id,className:"form__label".concat(this.props.required?" required":""),children:this.props.label}),(0,p.jsx)(v,{className:"form__select",optionsArray:this.props.optionsArray,required:this.props.required?"required":"",id:this.props.id})]})}}]),r}(u.Component),x=u.forwardRef((function(t,e){return(0,p.jsx)(g,function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?m(Object(r),!0).forEach((function(e){(0,n.Z)(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):m(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({innerRef:e},t))}))},7249:function(t,e,r){"use strict";function n(t){t.sort((function(t,e){return t.startedAt>e.startedAt?1:-1}))}r.d(e,{v:function(){return n}})},2366:function(t,e,r){"use strict";r.r(e),r.d(e,{default:function(){return k}});var n=r(5671),a=r(3144),o=r(7326),s=r(9340),c=r(2963),i=r(1120),u=r(4942),l=r(7294),p=r(123),d=r(8216),f=r(7061),h=r(7449),y=r(5893);function v(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=(0,i.Z)(t);if(e){var a=(0,i.Z)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,c.Z)(this,r)}}var m=function(t){(0,s.Z)(r,t);var e=v(r);function r(){return(0,n.Z)(this,r),e.apply(this,arguments)}return(0,a.Z)(r,[{key:"render",value:function(){return(0,y.jsx)("button",{id:this.props.id,onClick:this.props.functionOnClick,type:"button",className:"button-create-report",children:this.props.textButton})}}]),r}(l.Component);function b(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=(0,i.Z)(t);if(e){var a=(0,i.Z)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,c.Z)(this,r)}}var g=function(t){(0,s.Z)(r,t);var e=b(r);function r(){return(0,n.Z)(this,r),e.apply(this,arguments)}return(0,a.Z)(r,[{key:"render",value:function(){return(0,y.jsxs)("form",{className:"form form-chart",children:[(0,y.jsx)(f.Z,{label:"Select what to build the report for",required:!0,optionsArray:["Expenses","Income"],id:"type-report"}),(0,y.jsx)(f.Z,{label:"Select the category for the report",required:!0,id:"category-report",optionsArray:["Daily graph","Monthly graph","Yearly graph","Category graph"]}),(0,y.jsx)(h.Z,{innerRef:this.props.startDate,required:!0,label:"Select the start date of the interval",type:"date",id:"start-date-interval",flagPasswordField:!1,inputMode:"none"}),(0,y.jsx)(h.Z,{innerRef:this.props.endDate,required:!0,label:"Select the end date of the interval",type:"date",id:"end-date-interval",flagPasswordField:!1,inputMode:"none"}),(0,y.jsxs)("div",{className:"form__wrapper-buttons",children:[(0,y.jsx)(m,{functionOnClick:this.props.createReport,textButton:"Create graph",id:"graph"}),(0,y.jsx)(m,{functionOnClick:this.props.createReport,textButton:"Create table",id:"table"})]}),this.props.errorText&&(0,y.jsx)("p",{className:"massage-error",children:this.props.errorText})]})}}]),r}(l.Component),x=r(1704);function R(t){var e=t.split(/[- :]/);return t=new Date(e[0],Number(e[1])-1,e[2],e[3],e[4],e[5]).getTime()}var Z=r(7249);function j(t,e){var r=[],n=function(n){t.forEach((function(t){e[n].id===t&&r.push(e[n])}))};for(var a in e)n(a);return(0,Z.v)(r),r}function w(t,e){var r=document.querySelector(".report__table .tbody");r.innerHTML="",t.forEach((function(t,n){var a=document.createElement("tr"),o=document.createElement("td"),s=document.createElement("td"),c=document.createElement("td"),i=document.createElement("button");i.setAttribute("id",n),i.classList.add("button-show-cards"),o.classList.add("td"),s.classList.add("td"),c.classList.add("td"),o.innerText="".concat(t),s.innerText="".concat(e[n]),c.append(i),a.append(o),a.append(s),a.append(c),r.append(a)}))}var O=r(7385);function S(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=(0,i.Z)(t);if(e){var a=(0,i.Z)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,c.Z)(this,r)}}var C=function(t){(0,s.Z)(r,t);var e=S(r);function r(t){return(0,n.Z)(this,r),e.call(this,t)}return(0,a.Z)(r,[{key:"render",value:function(){return(0,y.jsxs)("div",{className:"report",children:[this.props.data.length>0&&(0,y.jsx)(O.Z,{width:"500px",height:"300px",chartType:"PieChart",loader:(0,y.jsx)("div",{children:"Loading Chart"}),data:this.props.data,options:{is3D:!0},rootProps:{"data-testid":"chart"}}),(0,y.jsxs)("table",{className:"table report__table".concat(this.props.flag&&"table"===this.props.type?"":" disabled"),children:[(0,y.jsx)("thead",{className:"thead",children:(0,y.jsxs)("tr",{className:"tr",children:[(0,y.jsx)("th",{className:"th",children:"Category"}),(0,y.jsx)("th",{className:"th",children:"Amount"}),(0,y.jsx)("th",{className:"th",children:"Show cards"})]})}),(0,y.jsx)("tbody",{className:"tbody",onClick:this.props.showCards})]})]})}}]),r}(l.Component),N=r(9943);function D(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=(0,i.Z)(t);if(e){var a=(0,i.Z)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,c.Z)(this,r)}}var P=function(t){(0,s.Z)(r,t);var e=D(r);function r(t){var a;return(0,n.Z)(this,r),a=e.call(this,t),(0,u.Z)((0,o.Z)(a),"checkData",(function(t){0===t[0].length&&(a.setState({errorText:"You do not have data for this interval of time"}),a.setState({type:""}),a.setState({flag:!1}))})),(0,u.Z)((0,o.Z)(a),"showCards",(function(t){if(t.target.classList.contains("button-show-cards")){document.querySelector(".modal-window__show-cards").classList.add("open");var e=Number(t.target.getAttribute("id"));a.setState({idButton:e,flagCardReport:!0})}})),(0,u.Z)((0,o.Z)(a),"clearReportCards",(function(){a.setState({flagCardReport:!1})})),(0,u.Z)((0,o.Z)(a),"createReport",(function(t){var e,r=document.querySelector("#type-report > div > div > div").innerText,n=document.querySelector("#category-report > div > div > div").innerText,o=a.startDate.current.value,s=a.endDate.current.value,c=(0,x.m)([o,s,r,n]),i=(e=s,R("".concat(o," 00:00:00"))<R("".concat(e," 00:00:00"))),u=function(t){return(new Date).getTime()>R("".concat(t," 00:00:00"))}(s),l=t.target.getAttribute("id");if(a.setState({type:l}),!c)return a.setState({errorText:"You have not completed the fields"}),void a.setState({flag:!1});if(!i)return a.setState({errorText:"The date interval is incorrect"}),void a.setState({flag:!1});if(!u)return a.setState({errorText:"You cannot choose a day beyond the current one"}),void a.setState({flag:!1});a.setState({errorText:""}),a.setState({flag:!0});var p="Expenses"===r?a.props.cardsExpenses:a.props.cardsIncome;function d(t){var e=[];return e.push(["Title","Sum"]),t[0].forEach((function(r,n){e.push([r,Number(t[1][n])])})),e}switch(n){case"Daily graph":var f=function(t,e,r){var n=R("".concat(t," 00:00:00")),a=R("".concat(e," 00:00:00")),o=[],s=[],c=[],i=[],u=[];for(var l in r){var p=r[l].date.split("."),d=R("".concat(p[2],"-").concat(Number(p[1]),"-").concat(p[0]," 00:00:00"));o.push([d,r[l].money,r[l].date,r[l].id])}for(var f=0;f<o.length;f++){var h=[];if(o[f].length<5){h.push(o[f][3]),o[f].push("true");for(var y=f+1;y<o.length;y++)o[f][0]===o[y][0]&&o[y].length<5&&(o[f][1]=(Number(o[f][1])+Number(o[y][1])).toFixed(2),h.push(o[y][3]),o[y].push("true"));s.push({date:o[f][0],money:o[f][1],label:o[f][2],cardsArray:h})}}return s.sort((function(t,e){return t.date>e.date?1:-1})),s.forEach((function(t,e){t.date>=n&&t.date<=a&&(c.push(t.money),i.push(t.label),u.push(j(t.cardsArray,r)))})),[i,c,u]}(o,s,p);a.checkData(f),"graph"===l?a.setState({data:d(f)}):"table"===l&&(a.setState({data:[]}),w(f[0],f[1]),a.setState({cardsReport:f[2]}));break;case"Category graph":var h=function(t,e,r){var n=R("".concat(t," 00:00:00")),a=R("".concat(e," 00:00:00")),o=[],s=[],c=[],i=[],u=[];for(var l in r)if(r[l].category){var p=r[l].date.split("."),d=R("".concat(p[2],"-").concat(p[1],"-").concat(p[0]," 00:00:00"));o.push([d,r[l].money,r[l].category,r[l].id])}for(var f=0;f<o.length;f++){var h=[];if(o[f].length<5){h.push(o[f][3]),o[f].push("true");for(var y=f+1;y<o.length;y++)o[f][2].toLowerCase().trim()===o[y][2].toLowerCase().trim()&&o[y].length<5&&(o[f][1]=(Number(o[f][1])+Number(o[y][1])).toFixed(2),h.push(o[y][3]),o[y].push("true"));s.push({date:o[f][0],money:o[f][1],label:o[f][2],cardsArray:h})}}return s.forEach((function(t){t.date>=n&&t.date<=a&&(c.push(t.money),i.push(t.label),u.push(j(t.cardsArray,r)))})),[i,c,u]}(o,s,p);a.checkData(h),"graph"===l?a.setState({data:d(h)}):"table"===l&&(a.setState({data:[]}),w(h[0],h[1]),a.setState({cardsReport:h[2]}));break;case"Yearly graph":var y=function(t,e,r){var n=t.split("-"),a=e.split("-"),o=Number(n[0]),s=Number(a[0]),c=[],i=[],u=[],l=[],p=[];for(var d in r){var f=r[d].date.split(".")[2];c.push([f,r[d].money,r[d].id])}for(var h=0;h<c.length;h++){var y=[];if(c[h].length<4){y.push(c[h][2]),c[h].push("true");for(var v=h+1;v<c.length;v++)c[h][0]===c[v][0]&&c[v].length<4&&(c[h][1]=(Number(c[h][1])+Number(c[v][1])).toFixed(2),y.push(c[v][2]),c[v].push("true"));i.push({date:c[h][0],money:c[h][1],cardsArray:y})}}return i.forEach((function(t){t.date>=o&&t.date<=s&&(u.push(t.money),l.push(t.date),p.push(j(t.cardsArray,r)))})),[l,u,p]}(o,s,p);a.checkData(y),"graph"===l?a.setState({data:d(y)}):"table"===l&&(a.setState({data:[]}),w(y[0],y[1]),a.setState({cardsReport:y[2]}));break;case"Monthly graph":var v=function(t,e,r){var n=R("".concat(t," 00:00:00")),a=R("".concat(e," 00:00:00")),o=[],s=[],c=[],i=[],u=[];for(var l in r){var p=r[l].date.split("."),d=R("".concat(p[2],"-").concat(p[1],"-").concat(p[0]," 00:00:00")),f=p[2],h=p[1];o.push([f,h,r[l].money,d,r[l].id])}for(var y=0;y<o.length;y++){var v=[];if(o[y].length<6){v.push(o[y][4]),o[y].push("true");for(var m=y+1;m<o.length;m++)o[y][0]===o[m][0]&&o[y][1]===o[m][1]&&o[m].length<6&&(o[y][2]=(Number(o[y][2])+Number(o[m][2])).toFixed(2),v.push(o[m][4]),o[m].push("true"));s.push({dateY:o[y][0],dateM:o[y][1],money:o[y][2],date:o[y][3],cardsArray:v})}}return s.forEach((function(t){t.date>=n&&t.date<=a&&(c.push(t.money),i.push("".concat(t.dateM,".").concat(t.dateY)),u.push(j(t.cardsArray,r)))})),[i,c,u]}(o,s,p);a.checkData(v),"graph"===l?a.setState({data:d(v)}):"table"===l&&(a.setState({data:[]}),w(v[0],v[1]),a.setState({cardsReport:v[2]}))}})),a.state={data:[],errorText:"",type:"",flag:!1,cardsReport:[],idButton:0,flagCardReport:!1},a.startDate=l.createRef(),a.endDate=l.createRef(),a}return(0,a.Z)(r,[{key:"render",value:function(){return(0,y.jsxs)(p.Z,{children:[(0,y.jsx)(N.Z,{modalTitle:"Cards",page:"show-cards",nameClass:"modal-window modal-window__show-cards",flag:this.state.flagCardReport,clearReportCards:this.clearReportCards,cardsReport:this.state.cardsReport,idButton:this.state.idButton}),(0,y.jsx)("h1",{className:"title",children:"Reports about your income and expenses"}),(0,y.jsxs)("div",{className:"report-container",children:[(0,y.jsx)(g,{startDate:this.startDate,endDate:this.endDate,createReport:this.createReport,errorText:this.state.errorText,typeReport:this.typeReport,categoryReport:this.categoryReport,buttonCreateType:this.buttonCreateType}),(0,y.jsx)(C,{showCards:this.showCards,data:this.state.data,flag:this.state.flag,type:this.state.type})]})]})}}]),r}(l.Component);var k=(0,d.$j)((function(t){return{cardsExpenses:t.userInfo.cardsExpenses,cardsIncome:t.userInfo.cardsIncome}}),null)(P)},4094:function(t,e,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/reports",function(){return r(2366)}])}},function(t){t.O(0,[947,617,385,706,943,774,888,179],(function(){return e=4094,t(t.s=e);var e}));var e=t.O();_N_E=e}]);