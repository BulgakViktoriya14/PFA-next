"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[608],{887:function(e,t,r){r.d(t,{Z:function(){return C}});var s=r(5671),n=r(3144),a=r(7326),o=r(9340),i=r(2963),c=r(1120),l=r(4942),u=r(7294),d=r(2567),f=r(1704),p=r(7449),h=r(6755),m=r(5893);function w(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,s=(0,c.Z)(e);if(t){var n=(0,c.Z)(this).constructor;r=Reflect.construct(s,arguments,n)}else r=s.apply(this,arguments);return(0,i.Z)(this,r)}}var v=function(e){(0,o.Z)(r,e);var t=w(r);function r(e){var n;return(0,s.Z)(this,r),n=t.call(this,e),(0,l.Z)((0,a.Z)(n),"changePassword",(function(e){e.preventDefault();var t=n.newPassword.current.value,r=n.repeatPassword.current.value,s=(0,a.Z)(n);(0,f.m)([t,r])?t===r?(n.setState({errorText:""}),d.Z.auth().currentUser.updatePassword(t).then((function(){s.props.openSuccessResult()})).catch((function(e){n.setState({errorText:e.message})}))):n.setState({errorText:"Your passwords do not match"}):n.setState({errorText:"Your fields are empty"})})),(0,l.Z)((0,a.Z)(n),"doVisibleOrHiddenPassword",(function(e){e.preventDefault(),(0,h.o)(e.target)})),n.state={errorText:""},n.newPassword=u.createRef(),n.repeatPassword=u.createRef(),n}return(0,n.Z)(r,[{key:"render",value:function(){return(0,m.jsxs)("form",{className:"form form-change-password",children:[!this.props.flagChangePassword&&(0,m.jsx)(p.Z,{ref:this.newPassword,required:!0,label:"New password",type:"password",id:"new-password",flagPasswordField:!0,showHidePassword:this.doVisibleOrHiddenPassword}),!this.props.flagChangePassword&&(0,m.jsx)(p.Z,{ref:this.repeatPassword,required:!0,label:"Re-enter the new password",type:"password",id:"repeat-password",flagPasswordField:!0,showHidePassword:this.doVisibleOrHiddenPassword}),!this.props.flagChangePassword&&(0,m.jsx)("button",{className:"form__submit",name:"submit",onClick:this.changePassword,children:"Save"}),this.props.flagChangePassword&&(0,m.jsxs)("div",{className:"success-result",children:[(0,m.jsx)("p",{className:"success-result__text",children:"Your password has been updated"}),(0,m.jsx)("button",{className:"form__submit",name:"submit",onClick:this.props.functionCloseWindow,children:"Close"})]}),this.state.errorText&&(0,m.jsx)("p",{className:"massage-error",children:this.state.errorText})]})}}]),r}(u.Component),g=r(3561),b=r(1163);function y(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,s)}return r}function j(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,s=(0,c.Z)(e);if(t){var n=(0,c.Z)(this).constructor;r=Reflect.construct(s,arguments,n)}else r=s.apply(this,arguments);return(0,i.Z)(this,r)}}var x=function(e){(0,o.Z)(r,e);var t=j(r);function r(e){var n;return(0,s.Z)(this,r),n=t.call(this,e),(0,l.Z)((0,a.Z)(n),"saveNewAvatar",(function(e){if(e.preventDefault(),""===n.state.errorText){var t=n.props.inputFile.current.files[0],r=(0,a.Z)(n);t?d.Z.storage().ref().child("avatars/".concat(r.props.idUser)).put(t).then((function(e){r.setState({errorText:""}),b.default.reload(window.location.pathname)})):n.setState({errorText:"You haven't selected a file"})}})),(0,l.Z)((0,a.Z)(n),"uploadFile",(function(){var e=n.props.inputFile.current.files[0];console.log(e.type),"image/png"===e.type||"image/jpeg"===e.type||"image/HEIF"===e.type?(n.labelInputFile.current.classList.add("upload-file"),n.buttonSave.current.classList.remove("disabled"),n.setState({errorText:""})):(n.labelInputFile.current.classList.remove("upload-file"),n.buttonSave.current.classList.add("disabled"),n.setState({errorText:"Wrong file type"}))})),n.state={errorText:""},n.labelInputFile=u.createRef(),n.buttonSave=u.createRef(),n}return(0,n.Z)(r,[{key:"render",value:function(){return(0,m.jsxs)("form",{className:"form form-change-avatar",children:[(0,m.jsxs)("div",{className:"form__wrapper-file",children:[(0,m.jsx)("label",{htmlFor:"money",className:"form__label",ref:this.labelInputFile,children:"Select a file"}),(0,m.jsx)("input",{type:"file","aria-label":"file for avatar",id:"file",name:"file",className:"form__input",onChange:this.uploadFile,ref:this.props.inputFile}),(0,m.jsx)("span",{className:"form__notice",children:"Files allowed: jpg, png and heif"})]}),(0,m.jsx)("button",{ref:this.buttonSave,className:"form__submit",name:"submit",onClick:this.saveNewAvatar,children:"Save photo"}),this.state.errorText&&(0,m.jsx)("p",{className:"massage-error",children:this.state.errorText})]})}}]),r}(u.Component),Z=u.forwardRef((function(e,t){return(0,m.jsx)(x,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?y(Object(r),!0).forEach((function(t){(0,l.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):y(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({inputFile:t},e))}));function _(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,s=(0,c.Z)(e);if(t){var n=(0,c.Z)(this).constructor;r=Reflect.construct(s,arguments,n)}else r=s.apply(this,arguments);return(0,i.Z)(this,r)}}var P=function(e){(0,o.Z)(r,e);var t=_(r);function r(e){var n;return(0,s.Z)(this,r),n=t.call(this,e),(0,l.Z)((0,a.Z)(n),"sendEmail",(function(e){e.preventDefault();var t=(0,a.Z)(n),r=n.email.current.value;d.Z.auth().sendPasswordResetEmail(r).then((function(){t.setState({flagSendEmail:!t.state.flagSendEmail})})).catch((function(e){return console.log(e)}))})),n.state={flagSendEmail:!1},n.email=u.createRef(),n}return(0,n.Z)(r,[{key:"render",value:function(){return(0,m.jsxs)("form",{className:"form form-set-password",children:[!this.state.flagSendEmail&&(0,m.jsx)(p.Z,{ref:this.email,label:"Your email",id:"email-for-password",type:"email",required:!0}),!this.state.flagSendEmail&&(0,m.jsx)("button",{className:"form__submit",name:"submit",onClick:this.sendEmail,children:"Send email"}),this.state.flagSendEmail&&(0,m.jsxs)("div",{className:"success-result",children:[(0,m.jsx)("p",{className:"success-result__text",children:"Check your email"}),(0,m.jsx)("button",{className:"form__submit",name:"submit",onClick:this.props.functionCloseWindow,children:"Close"})]})]})}}]),r}(u.Component),N=r(5675);function O(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,s=(0,c.Z)(e);if(t){var n=(0,c.Z)(this).constructor;r=Reflect.construct(s,arguments,n)}else r=s.apply(this,arguments);return(0,i.Z)(this,r)}}var R=function(e){(0,o.Z)(r,e);var t=O(r);function r(e){var n;return(0,s.Z)(this,r),n=t.call(this,e),(0,l.Z)((0,a.Z)(n),"closeModalWindow",(function(e){var t=n.modalWindow.current;if(e.target.classList.contains("modal-window")||e.target.classList.contains("close")){if(t.classList.contains("modal-window__change-password")&&n.setState({flagChangePassword:!1}),t.classList.contains("modal-window__success-check-in"))return void n.props.history.push("/login");t.classList.contains("modal-window__change-avatar")&&n.inputFile.current.classList.remove("upload-file"),t.classList.remove("open"),t.querySelector(".form").reset()}})),(0,l.Z)((0,a.Z)(n),"openSuccessResult",(function(){n.setState({flagChangePassword:!0})})),(0,l.Z)((0,a.Z)(n),"closeModalWindowAfterChangePassword",(function(){n.modalWindow.current.classList.remove("open"),n.setState({flagChangePassword:!1})})),n.state={flagChangePassword:!1},n.modalWindow=u.createRef(),n.inputFile=u.createRef(),n}return(0,n.Z)(r,[{key:"render",value:function(){var e=this;return(0,m.jsx)("div",{className:this.props.nameClass,onClick:this.closeModalWindow,ref:this.modalWindow,children:(0,m.jsxs)("div",{className:"modal-window__block",children:["page-login"===this.props.page&&(0,m.jsxs)("div",{className:"modal-window__content",children:[(0,m.jsx)("button",{className:"close",children:(0,m.jsx)(N.default,{className:"close",src:g.Z,alt:"icon",width:30,height:30,loading:"lazy"})}),(0,m.jsx)("h4",{className:"modal-window__title",children:"Change password"}),(0,m.jsx)(P,{functionCloseWindow:this.closeModalWindowAfterChangePassword})]}),"profile-password"===this.props.page&&(0,m.jsxs)("div",{className:"modal-window__content",children:[(0,m.jsx)("button",{className:"close",children:(0,m.jsx)(N.default,{className:"close",src:g.Z,alt:"icon",width:30,height:30,loading:"lazy"})}),(0,m.jsx)("h4",{className:"modal-window__title",children:"Change password"}),(0,m.jsx)(v,{functionCloseWindow:this.closeModalWindowAfterChangePassword,openSuccessResult:this.openSuccessResult,flagChangePassword:this.state.flagChangePassword})]}),"profile-avatar"===this.props.page&&(0,m.jsxs)("div",{className:"modal-window__content",children:[(0,m.jsx)("button",{className:"close",children:(0,m.jsx)(N.default,{className:"close",src:g.Z,alt:"icon",width:30,height:30,loading:"lazy"})}),(0,m.jsx)("h4",{className:"modal-window__title",children:"Change avatar"}),(0,m.jsx)(Z,{history:this.props.history,ref:this.inputFile,idUser:this.props.idUser})]}),"check-in"===this.props.page&&(0,m.jsxs)("div",{className:"modal-window__content success-result",children:[(0,m.jsx)("p",{className:"success-result__text",children:"You are registered"}),(0,m.jsx)("button",{className:"form__submit",name:"submit",onClick:function(){return e.props.router.push("/")},children:"Login to your account"})]})]})})}}]),r}(u.Component),C=(0,b.withRouter)(R)},614:function(e,t,r){var s=r(4942),n=r(5671),a=r(3144),o=r(9340),i=r(2963),c=r(1120),l=r(7294),u=r(5893);function d(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,s)}return r}function f(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,s=(0,c.Z)(e);if(t){var n=(0,c.Z)(this).constructor;r=Reflect.construct(s,arguments,n)}else r=s.apply(this,arguments);return(0,i.Z)(this,r)}}var p=function(e){(0,o.Z)(r,e);var t=f(r);function r(){return(0,n.Z)(this,r),t.apply(this,arguments)}return(0,a.Z)(r,[{key:"render",value:function(){return(0,u.jsxs)("div",{className:"form__item",children:[(0,u.jsx)("label",{htmlFor:this.props.id,className:"form__label".concat(this.props.required?" required":""),children:this.props.label}),(0,u.jsx)("input",{type:this.props.type,id:this.props.id,value:this.props.value?this.props.value:"",readOnly:this.props.readonly?"readonly":"",name:this.props.id,className:"form__input","aria-required":this.props.required?"required":"",required:this.props.required?"required":"",ref:this.props.innerRef,onChange:this.props.functionOnChange,"aria-label":this.props.label}),this.props.flagPasswordField&&(0,u.jsx)("button",{className:"button-visible-password","aria-label":"Button visible password",onClick:this.props.showHidePassword})]})}}]),r}(l.Component);t.Z=l.forwardRef((function(e,t){return(0,u.jsx)(p,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?d(Object(r),!0).forEach((function(t){(0,s.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):d(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({innerRef:t},e))}))},6755:function(e,t,r){function s(e){e.classList.contains("button-hidden-password")?(e.classList.remove("button-hidden-password"),e.previousElementSibling.setAttribute("type","password")):(e.classList.add("button-hidden-password"),e.previousElementSibling.setAttribute("type","text"))}r.d(t,{o:function(){return s}})}}]);