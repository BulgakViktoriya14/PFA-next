(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[620],{1887:function(e,t,r){"use strict";function n(e){return{type:"SET_USER_SUM",payload:e}}r.d(t,{A:function(){return n}})},7483:function(e,t,r){"use strict";var n=r(5893),s=r(6610),o=r(5991),a=r(5255),c=r(6089),u=r(7608);function i(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,u.Z)(e);if(t){var s=(0,u.Z)(this).constructor;r=Reflect.construct(n,arguments,s)}else r=n.apply(this,arguments);return(0,c.Z)(this,r)}}var f=function(e){(0,a.Z)(r,e);var t=i(r);function r(){return(0,s.Z)(this,r),t.apply(this,arguments)}return(0,o.Z)(r,[{key:"render",value:function(){return(0,n.jsx)("button",{className:"button-delete-card",onClick:this.props.changeFlagDeleteCard})}}]),r}(r(7294).Component);t.Z=f},3923:function(e,t,r){"use strict";var n=r(5893),s=r(6610),o=r(5991),a=r(3349),c=r(5255),u=r(6089),i=r(7608),f=r(6156);function l(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,i.Z)(e);if(t){var s=(0,i.Z)(this).constructor;r=Reflect.construct(n,arguments,s)}else r=n.apply(this,arguments);return(0,u.Z)(this,r)}}var d=function(e){(0,c.Z)(r,e);var t=l(r);function r(){var e;(0,s.Z)(this,r);for(var n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return e=t.call.apply(t,[this].concat(o)),(0,f.Z)((0,a.Z)(e),"openPopupAddCard",(function(){document.querySelector(".creation-card").classList.add("creation-card_open")})),e}return(0,o.Z)(r,[{key:"render",value:function(){return(0,n.jsx)("button",{className:"button-open-popup-add-card",onClick:this.openPopupAddCard})}}]),r}(r(7294).Component);t.Z=d},4800:function(e,t,r){"use strict";var n=r(5893),s=r(6610),o=r(5991),a=r(3349),c=r(5255),u=r(6089),i=r(7608),f=r(6156),l=r(7294),d=r(8278),p=r(6940),h=r(1887);function m(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,i.Z)(e);if(t){var s=(0,i.Z)(this).constructor;r=Reflect.construct(n,arguments,s)}else r=n.apply(this,arguments);return(0,u.Z)(this,r)}}var y=function(e){(0,c.Z)(r,e);var t=m(r);function r(e){var n;return(0,s.Z)(this,r),n=t.call(this,e),(0,f.Z)((0,a.Z)(n),"createList",(function(){var e=[];for(var t in n.props.cards)e.push(n.props.cards[t]),n.sortCard(e);e.reverse(),n.setState({arrayCards:e})})),(0,f.Z)((0,a.Z)(n),"openMoreDetails",(function(e){e.target.parentElement.classList.add("open")})),(0,f.Z)((0,a.Z)(n),"closeMoreDetails",(function(e){e.target.parentElement.parentElement.classList.remove("open")})),(0,f.Z)((0,a.Z)(n),"deleteCard",(function(e){var t=(0,a.Z)(n),r=e.target.parentElement.getAttribute("id"),s=e.target.parentElement.querySelector(".card__sum").textContent,o=Number(n.props.userSum);d.Z.database().ref("users/user"+t.props.userId+"/"+t.props.type+"/card"+r).remove().then((function(){"cardsIncome"===t.props.type&&(o-=Number(s)),"cardsExpenses"===t.props.type&&(o+=Number(s)),t.props.setUserSumFunction(o)})).then((function(){d.Z.database().ref("users/user"+t.props.userId).update({money:o})})).catch((function(e){return console.log(e.message)}))})),n.state={arrayCards:[]},n}return(0,o.Z)(r,[{key:"componentDidUpdate",value:function(e){this.props.cards!==e.cards&&this.createList()}},{key:"componentDidMount",value:function(){this.createList()}},{key:"sortCard",value:function(e){e.sort((function(e,t){return e.startedAt>t.startedAt?1:-1}))}},{key:"render",value:function(){var e=this;return(0,n.jsxs)("div",{className:"container cards",children:[!this.state.arrayCards.length&&(0,n.jsx)("p",{className:"cards-container-empty",children:"You haven't created any cards yet."}),this.state.arrayCards.map((function(t){return(0,n.jsxs)("article",{className:"card",id:t.id,children:[(0,n.jsx)("button",{className:"card__button-delete".concat(e.props.flagDeleteCard?" visible":""),onClick:e.deleteCard}),(0,n.jsx)("h3",{className:"card__title",children:t.title}),(0,n.jsx)("h4",{className:"card__category",children:t.category}),t.description&&(0,n.jsx)("button",{className:"card__more-details",onClick:e.openMoreDetails,children:"More details"}),(0,n.jsxs)("p",{className:"card__bottom",children:[(0,n.jsx)("span",{className:"card__sum",children:t.money}),(0,n.jsx)("span",{className:"card__date",children:t.date})]}),t.description&&(0,n.jsxs)("div",{className:"card__description",children:[(0,n.jsx)("p",{children:t.description}),(0,n.jsx)("button",{className:"card__more-details",onClick:e.closeMoreDetails,children:"Hide"})]})]},t.id)}))]})}}]),r}(l.Component);t.Z=(0,p.$j)((function(e){return{userId:e.userInfo.idUser,cardsIncome:e.userInfo.cardsIncome,cardsExpenses:e.userInfo.cardsExpenses,userSum:e.userInfo.userSum}}),(function(e){return{setUserSumFunction:function(t){e((0,h.A)(t))}}}))(y)},5011:function(e,t,r){"use strict";r.d(t,{Z:function(){return j}});var n=r(5893),s=r(6610),o=r(5991),a=r(3349),c=r(5255),u=r(6089),i=r(7608),f=r(6156),l=r(7294),d=r(518),p=r(1704),h=r(4586),m=r(8278),y=r(1887),v=r(6940),Z=r(7449);function b(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,i.Z)(e);if(t){var s=(0,i.Z)(this).constructor;r=Reflect.construct(n,arguments,s)}else r=n.apply(this,arguments);return(0,u.Z)(this,r)}}var g=function(e){(0,c.Z)(r,e);var t=b(r);function r(e){var n;return(0,s.Z)(this,r),n=t.call(this,e),(0,f.Z)((0,a.Z)(n),"getDate",(function(){var e=new Date,t=e.getDate(),r=e.getMonth()+1,n=e.getFullYear();return t<10&&(t="0"+t),r<10&&(r="0"+r),n<10&&(n="0"+n),t+"."+r+"."+n})),(0,f.Z)((0,a.Z)(n),"createCard",(function(){var e=n.sum.current.value,t=n.category.current.value,r=n.name.current.value,s=n.description.current.value;return{title:r,money:e,category:t,date:n.getDate(),description:s}})),(0,f.Z)((0,a.Z)(n),"checkResultAccount",(function(e){return!("expenses"===n.props.type&&Number(e)>Number(n.props.userSum))||(n.setState({errorText:"Your balance does not allow the operation"}),!1)})),(0,f.Z)((0,a.Z)(n),"crateOneCard",(function(e,t,r,n){var s=(0,h.Z)(),o="/users/user"+n.props.userId+"/"+e+"/card"+s;m.Z.database().ref(o).set({startedAt:m.Z.database.ServerValue.TIMESTAMP,id:s,category:r.category,date:r.date,money:r.money,title:r.title,description:r.description}).then((function(){n.form.current.reset()})).then((function(){n.props.setUserSumFunction(t)})).then((function(){m.Z.database().ref("/users/user"+n.props.userId).update({money:t})}))})),(0,f.Z)((0,a.Z)(n),"addCart",(function(){var e=document.querySelectorAll("input[required]"),t=[];if(e.forEach((function(e){t.push(e.value)})),(0,p.m)(t)){if(n.setState({errorText:""}),n.checkResultAccount(document.querySelector("#sum").value)){var r=(0,a.Z)(n),s=n.createCard();if("income"===n.props.type){var o=Number(n.props.userSum)+Number(s.money);n.crateOneCard("cardsIncome",o,s,r)}else{var c=Number(n.props.userSum)-Number(s.money);n.crateOneCard("cardsExpenses",c,s,r)}}}else n.setState({errorText:"You did not fill in the required fields"})})),n.state={errorText:""},n.name=l.createRef(),n.sum=l.createRef(),n.category=l.createRef(),n.description=l.createRef(),n.form=l.createRef(),n}return(0,o.Z)(r,[{key:"render",value:function(){return(0,n.jsxs)("form",{className:"form form-add-card",ref:this.form,children:[(0,n.jsx)(Z.Z,{ref:this.name,required:!0,label:"Title",type:"text",id:"name",flagPasswordField:!1}),(0,n.jsx)(Z.Z,{ref:this.category,label:"Category",type:"text",id:"category",flagPasswordField:!1}),(0,n.jsx)(Z.Z,{ref:this.sum,required:!0,label:"Amount",type:"number",id:"sum",flagPasswordField:!1}),(0,n.jsx)(Z.Z,{ref:this.description,label:"Description",type:"text",id:"description",flagPasswordField:!1}),(0,n.jsx)("input",{type:"button",className:"button-add-card",value:"Add card",onClick:this.addCart}),this.state.errorText&&(0,n.jsx)("p",{className:"massage-error",children:this.state.errorText})]})}}]),r}(l.Component);var x=(0,v.$j)((function(e){return{cardsIncome:e.userInfo.cardsIncome,cardsExpenses:e.userInfo.cardsExpenses,userId:e.userInfo.idUser,userSum:e.userInfo.userSum}}),(function(e){return{setUserSumFunction:function(t){e((0,y.A)(t))}}}))(g),C=r(5675);function R(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,i.Z)(e);if(t){var s=(0,i.Z)(this).constructor;r=Reflect.construct(n,arguments,s)}else r=n.apply(this,arguments);return(0,u.Z)(this,r)}}var j=function(e){(0,c.Z)(r,e);var t=R(r);function r(e){var n;return(0,s.Z)(this,r),n=t.call(this,e),(0,f.Z)((0,a.Z)(n),"closePopupCreationCard",(function(){n.blockCreateCard.current.classList.remove("creation-card_open")})),n.state={errorText:""},n.blockCreateCard=l.createRef(),n}return(0,o.Z)(r,[{key:"render",value:function(){return(0,n.jsxs)("div",{className:"creation-card",ref:this.blockCreateCard,children:[(0,n.jsx)("button",{className:"close",onClick:this.closePopupCreationCard,children:(0,n.jsx)(C.default,{src:d.Z,alt:"close",width:30,height:30,loading:"lazy"})}),(0,n.jsx)("h2",{className:"subtitle",children:"Create card"}),(0,n.jsx)(x,{type:this.props.type})]})}}]),r}(l.Component)},7449:function(e,t,r){"use strict";var n=r(6156),s=r(5893),o=r(6610),a=r(5991),c=r(5255),u=r(6089),i=r(7608),f=r(7294);function l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function d(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,i.Z)(e);if(t){var s=(0,i.Z)(this).constructor;r=Reflect.construct(n,arguments,s)}else r=n.apply(this,arguments);return(0,u.Z)(this,r)}}var p=function(e){(0,c.Z)(r,e);var t=d(r);function r(e){return(0,o.Z)(this,r),t.call(this,e)}return(0,a.Z)(r,[{key:"render",value:function(){return(0,s.jsxs)("div",{className:"form__item",children:[(0,s.jsx)("label",{htmlFor:this.props.id,className:"form__label".concat(this.props.required?" required":""),children:this.props.label}),(0,s.jsx)("input",{type:this.props.type,ref:this.props.innerRef,id:this.props.id,name:this.props.id,className:"form__input",required:this.props.required?"required":"","aria-required":this.props.required?"required":"",onChange:this.props.functionOnChange,"aria-label":this.props.label}),this.props.flagPasswordField&&(0,s.jsx)("button",{className:"button-visible-password","aria-label":"Button visible password",onClick:this.props.showHidePassword})]})}}]),r}(f.Component);t.Z=f.forwardRef((function(e,t){return(0,s.jsx)(p,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({innerRef:t},e))}))},1704:function(e,t,r){"use strict";function n(e){var t=0;return e.forEach((function(e){""===e&&t++})),!(t>0)}r.d(t,{m:function(){return n}})},4586:function(e,t,r){"use strict";var n;r.d(t,{Z:function(){return l}});var s=new Uint8Array(16);function o(){if(!n&&!(n="undefined"!==typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!==typeof msCrypto&&"function"===typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return n(s)}var a=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;for(var c=function(e){return"string"===typeof e&&a.test(e)},u=[],i=0;i<256;++i)u.push((i+256).toString(16).substr(1));var f=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=(u[e[t+0]]+u[e[t+1]]+u[e[t+2]]+u[e[t+3]]+"-"+u[e[t+4]]+u[e[t+5]]+"-"+u[e[t+6]]+u[e[t+7]]+"-"+u[e[t+8]]+u[e[t+9]]+"-"+u[e[t+10]]+u[e[t+11]]+u[e[t+12]]+u[e[t+13]]+u[e[t+14]]+u[e[t+15]]).toLowerCase();if(!c(r))throw TypeError("Stringified UUID is invalid");return r};var l=function(e,t,r){var n=(e=e||{}).random||(e.rng||o)();if(n[6]=15&n[6]|64,n[8]=63&n[8]|128,t){r=r||0;for(var s=0;s<16;++s)t[r+s]=n[s];return t}return f(n)}}}]);